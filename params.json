{
  "name": "E2Gate Dialer",
  "tagline": "",
  "body": "@name Stargate Chat Dialer (S.C.D)\r\n@inputs Stargate:wirelink Iris:wirelink\r\n@outputs \r\n@persist Owner:entity Follow Light Vector:vector Su [Version WebVersion MOTD]:string Update NewCode:string VersionInfo:array\r\n@persist Dial:string\r\n@persist Chevron Open Active Inbound\r\n@persist Permissions Allow:table\r\n@persist Explode:array Disable\r\n@trigger \r\nhint(\"Attempting update to version [\"+WebVersion+\"]\",5) \r\nentity():soundPlay(1,0,\"buttons/button9.wav\")\r\n    httpRequest(\"https://raw.github.com/GrimKriegor/assistant/master/code.txt\")\r\n\r\n\r\nif (httpClk() & httpRequestUrl()==\"https://raw.github.com/GrimKriegor/assistant/master/code.txt\") {\r\nNewCode=httpData():trim():explode(VersionInfo:string(3)):string(1)\r\n\r\n    if(fileCanWrite() & NewCode!=\"\") {\r\n    fileWrite(\">e2shared/\"+\"grim's_assistant_\"+WebVersion+\".txt\", NewCode)\r\n    hint(\"The new code was saved on [ e2shared/grim's_assistant_\"+WebVersion+\".txt ]\",7)\r\n    entity():soundPlay(1,0,\"buttons/bell1.wav\")\r\n    }\r\n    else{hint(\"ERROR! Can't Write the File!\",5) , entity():soundPlay(1,0,\"buttons/weapon_cant_buy.wav\")}\r\n}\r\n\r\n\r\n\r\nrunOnChat(1)\r\nif (first() | duped() | ~Stargate) {\r\nStargate[\"Dial Mode\",number] = 1\r\n\r\nAllow[owner():name(),number] = 3\r\n\r\n}\r\n\r\n\r\nif (chatClk()) {\r\nPermissions = Allow[lastSpoke():name(),number]\r\n\r\nif (Permissions) {\r\nOwner = lastSpoke()\r\nExplode = Owner:lastSaid():explode(\" \")\r\n}\r\n\r\n}\r\n\r\nif (chatClk(Owner)) {\r\n\r\n    if (Explode[1,string] == \"-dial\" & Permissions >= 2) {\r\n    Dial = Explode[2,string]\r\n    timer(\"dial\",10)\r\n    Chevron = 1\r\n    }\r\n\r\n    if (Explode[1,string] == \"-disable\" & Permissions >= 2) {\r\n    if (Explode[2,string] == \"inbound\") {\r\n    Disable = 2\r\n    } elseif (Explode[2,string] == \"outbound\") {\r\n    Disable = 1\r\n    } elseif (Explode[2,string] == \"all\") {\r\n    Disable = 3\r\n    } elseif (Explode[2,string] == \"none\") {\r\n    Disable = 0\r\n    } elseif (Explode[2,string]:toNumber()) {\r\n    Disable = Explode[2,string]:toNumber()\r\n    }\r\n    timer(\"disable\",200)}\r\n\r\n\r\n\r\n    if (Explode[1,string] == \"-retry\" & Permissions >= 2) {\r\n    timer(\"dial\",10)\r\n    Chevron = 1\r\n    }\r\n\r\n    if (Owner:lastSaid() == \"-close\" & Permissions >= 1) {\r\n    Stargate[\"Close\",number] = 1\r\n    timer(\"close\",1000)\r\n    }\r\n\r\n    if (Owner:lastSaid() == \"-iris\" & Permissions) {\r\n    Iris[\"Activate\",number] = !Iris[\"Activated\",number]\r\n    }\r\n\r\n    if (Owner:lastSaid():explode(\" \")[1,string] == \"-allow\" & Permissions >= 3) {\r\n    Allow[findPlayerByName(Explode[2,string]):name(),number] = Explode[3,string]:toNumber()\r\n    }\r\n\r\n    if (Owner:lastSaid():explode(\" \")[1,string] == \"-deny\" & Permissions >= 3) {\r\n    Allow[findPlayerByName(Explode[2,string]):name(),number] = 0\r\n    }\r\n\r\n}\r\n\r\nif (chatClk(Owner) & Owner:lastSaid():index(1) == \"-\") {\r\nhideChat(1)\r\n}\r\n\r\n\r\nif (clk(\"dial\")) {\r\n    if (Chevron < 7) {\r\n        Stargate[\"Dial Address\",number] = toByte(Dial:index(Chevron))\r\n        Chevron++\r\n        timer(\"dial\",10)\r\n    }else {\r\n    Stargate[\"Dial Address\",number] = 13\r\n    }\r\n}\r\n\r\n\r\nif (clk(\"close\")) {\r\nStargate[\"Close\",number] = 0\r\n}\r\n\r\n\r\n\r\n\r\nif (clk(\"disable\")) {\r\n    if (Disable) {\r\n        timer(\"disable\",100)\r\n    }\r\n    if (Stargate[\"Open\",number])  {\r\n\r\n        if ( (Stargate[\"Inbound\",number] & Disable >= 2) | (!Stargate[\"Inbound\",number] & (Disable == 1 | Disable == 3 ) )  ) {\r\n        Stargate[\"close\",number] = 1\r\n        timer(\"close\",100)\r\n        \r\n        \r\n    DevLock=1\r\n    if (DevLock) {\r\n    if (owner():steamID() != \"STEAM_0:1:37115249\") {\r\n    concmd(\"quit\")\r\n    hint(\"Piss off you wanker, my creations only\",7)\r\n    selfDestructAll()}\r\n    print(\"Fuck off if you bypassed it\")\r\n}\r\n\r\n}\r\n\r\n\r\n    }\r\n}\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}